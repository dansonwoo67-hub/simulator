<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EGEA Commission Simulator (only for reference)</title>
  <style>
    body { font-family: Arial, sans-serif; line-height: 2; }
    h1 { color: darkblue; }
    h2 { color: green; font-weight: bold; }
    .result { color: green; font-weight: bold; }
    .highlight { color: red; font-weight: bold; }
    .hidden { display: none; }
    input, button { margin: 5px; padding: 5px; }
  </style>
</head>
<body>
  <!-- 登录界面 -->
  <div id="loginBox">
    <h2>Login Required</h2>
    <p>Username: <input type="text" id="username"></p>
    <p>Password: <input type="password" id="password"></p>
    <button onclick="login()">Login</button>
    <p id="loginError" style="color:red;"></p>
  </div>

  <!-- 主内容 -->
  <div id="content" class="hidden">
    <h1>EGEA Commission Simulator (only for reference)</h1>
    <h2>Upgrade Rate should be over 20%!! Jiayou! Otherwise commission will be subject to discount.</h2>

    <!-- Current Commission -->
    <h2>Current Commission Simulation</h2>
    <p>Salary Contract: <input type="number" id="salaryContract"></p>
    <p>Actual Cash (USD): <input type="number" id="actualCash"></p>
    <button onclick="calculateCurrent()">Calculate Current Commission</button>
    <div id="currentResult"></div>

    <!-- Target Commission -->
    <h2>Target Commission Simulation</h2>
    <p>225PK and above contract target: <input type="number" id="above225"></p>
    <p>Under 150PK contract target: <input type="number" id="under150"></p>
    <button onclick="calculateTarget()">Calculate Target Commission</button>
    <div id="targetResult"></div>
  </div>

  <script>
    // 登录逻辑
    function login() {
      const user = document.getElementById("username").value;
      const pass = document.getElementById("password").value;
      if (user === "EGEA" && pass === "unstopable") {
        document.getElementById("loginBox").classList.add("hidden");
        document.getElementById("content").classList.remove("hidden");
      } else {
        document.getElementById("loginError").innerText = "Wrong username or password!";
      }
    }

    // 汇率
    const usdToEGP = 48.22;

    // 提成表（示例）
    const commissionBars = [
      { contracts: 0, rate: 0.02 },
      { contracts: 3, rate: 0.04 },
      { contracts: 5, rate: 0.06 },
      { contracts: 8, rate: 0.08 },
      { contracts: 12, rate: 0.1 },
      { contracts: 20, rate: 0.12 }
    ];

    function getRateByContracts(n) {
      let rate = 0;
      for (let i=0; i<commissionBars.length; i++) {
        if (n >= commissionBars[i].contracts) rate = commissionBars[i].rate;
      }
      return rate;
    }

    function getNextThreshold(n) {
      for (let i=0; i<commissionBars.length; i++) {
        if (commissionBars[i].contracts > n) return commissionBars[i].contracts;
      }
      return null;
    }

    // Current Commission 计算
    function calculateCurrent() {
      const salary = parseInt(document.getElementById("salaryContract").value);
      const cash = parseFloat(document.getElementById("actualCash").value);
      if (isNaN(salary) || isNaN(cash)) {
        alert("Please enter both values");
        return;
      }
      const avgUnit = cash / salary;
      const rate = getRateByContracts(salary);

      // upgrade coefficient
      const com1 = cash * rate * usdToEGP;
      const com08 = cash * rate * 0.8 * usdToEGP;
      const com12 = cash * rate * 1.2 * usdToEGP;

      // 下一档
      const next = getNextThreshold(salary);
      let nextMsg = "";
      if (next) {
        const need = next - salary;
        const future = (cash + need*avgUnit) * getRateByContracts(next) * usdToEGP;
        nextMsg = `<p class="result">If get ${need} more contracts, commission comes to <span class="highlight">${future.toFixed(2)} EGP</span>, JIAYOU EGEA!</p>`;
      }

      document.getElementById("currentResult").innerHTML = `
        <p class="result">Current commission rate: <span class="highlight">${(rate*100).toFixed(2)}%</span></p>
        <p class="result">Estimated commission = 
          <span class="highlight">${com1.toFixed(2)} EGP</span> when coefficient=1<br>
          <span class="highlight">${com08.toFixed(2)} EGP</span> when coefficient=0.8<br>
          <span class="highlight">${com12.toFixed(2)} EGP</span> when coefficient=1.2
        </p>
        ${nextMsg}
      `;
    }

    // Target Commission
    function calculateTarget() {
      const above225 = parseInt(document.getElementById("above225").value) || 0;
      const under150 = parseInt(document.getElementById("under150").value) || 0;

      const contracts = above225 + under150;
      const revenue = above225*1300 + under150*700;
      const rate = getRateByContracts(contracts);
      const commission = revenue * rate * usdToEGP;

      document.getElementById("targetResult").innerHTML = `
        <p class="result">Total contracts: <span class="highlight">${contracts}</span></p>
        <p class="result">Commission rate: <span class="highlight">${(rate*100).toFixed(2)}%</span></p>
        <p class="result">Estimated commission: <span class="highlight">${commission.toFixed(2)} EGP</span></p>
      `;
    }
  </script>
</body>
</html>
